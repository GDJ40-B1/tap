<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.btf.tap.mapper.MemberMapper">
	<resultMap type="com.btf.tap.vo.Member" id="resultMember">
		<result column="member_id" property="memberId"/>
		<result column="member_pw" property="memberPw"/>
		<result column="member_age" property="memberAge"/>
		<result column="member_phone" property="memberPhone"/>
		<result column="member_point" property="memberPoint"/>
		<result column="create_date" property="createDate"/>
		<result column="update_date" property="updateDate"/>
	</resultMap>
	
	<!-- 회원 한 명의 정보 불러오기 -->
	<select id="selectMemberOne" resultMap="resultMember" parameterType="com.btf.tap.vo.Member" >
		SELECT 
			member_id,
			member_name,
			member_age,
			member_phone,
			member_point,
			create_date,
			update_date
		FROM
			member
		WHERE
			member_id=#{memberId}
	</select>
	
	<!-- 회원 전체 목록 불러오기 -->
	<select id="selectMemberList" resultMap="resultMember" parameterType="com.btf.tap.vo.Member" >
		SELECT 
			member_id,
			member_name,
			member_age,
			member_phone,
			member_point,
			create_date,
			update_date
		FROM
			member
	</select>
	
	<!-- 회원 비밀번호 확인하기(수정용) -->
	<select id="selectMemberPw" parameterType="com.btf.tap.vo.Member" >
		SELECT 
			COUNT(*)
		FROM
			member
		WHERE
			member_id=#{memberId} AND
			member_pw=#{memberPw}
	</select>
	
	<!--  새로운 회원 한 명 등록하기 -->
	<insert id="insertMemberOne" parameterType="com.btf.tap.vo.Member">
		INSERT INTO
			member(
				member_id, 
				member_pw,
				member_age,
				member_name,
				member_phone,
				member_point,
				create_date,
				update_date 
			)
		VALUES (
			#{memberId},
			#{memberPw},
			#{memberAge},
			#{memberName},
			#{memberPhone},
			0,
			NOW(),
			NOW()
		)
	</insert>
	
	<!-- 회원 한 명의 정보를 수정(나이,이름, 전화번호 ) -->
	<update id="updateMemberOne" parameterType="com.btf.tap.vo.Member">
		UPDATE
			member
		SET
			member_age=#{memberAge},
			member_name=#{memberName},
			member_phone=#{memberPhone},
			update_date=NOW()
		WHERE
			member_id=#{memberId}
	</update>
	
	<!-- 회원 한 명의 정보를 수정(포인트) -->
	<update id="updateMemberPoint" parameterType="com.btf.tap.vo.Member">
		UPDATE
			member
		SET
			member_point=#{memberPoint},
			update_date=NOW()
		WHERE
			member_id=#{memberId}
	</update>
	
	<!-- 회원 한 명의 정보를 수정(비밀번호) -->
	<update id="updateMemberPw" parameterType="com.btf.tap.vo.Member">
		UPDATE
			member
		SET
			member_pw=#{memberPw},
			update_date=NOW()
		WHERE
			member_id=#{memberId}
	</update>
	
	<!-- 회원 한 명의 정보를 삭제 -->
	<delete id="deleteMemberOne" parameterType="com.btf.tap.vo.Member">
		DELETE
			member
		WHERE
			member_id=#{memberID},
			member_pw=#{memberPw}
	</delete>

</mapper>